-- Yoriichi Menu - Adaptado para Executor Delta (Roblox) - MiniWindow arrastável Mouse e Touch

local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")

local LocalPlayer = Players.LocalPlayer

-- ANT AFK (executa ao iniciar)
pcall(function()
    loadstring(game:HttpGet("https://rawscripts.net/raw/Universal-Script-Ant-Afk-6259"))()
end)

local function Notify(msg)
    print("[Yoriichi Menu]: "..msg)
end

Notify("Bem vindo ao script Yoriichi menu (aprimorado Delta)")

local function playClickSound()
    local s = Instance.new("Sound")
    s.SoundId = "rbxassetid://12221967"
    s.Volume = 0.6
    s.PlayOnRemove = true
    s.Parent = workspace
    s:Destroy()
end

local sg = Instance.new("ScreenGui")
sg.Name = "YoriichiMenuUI"
sg.IgnoreGuiInset = true
sg.ResetOnSpawn = false
sg.Parent = game.CoreGui

local function newUICorner(parent, radius)
    radius = radius or UDim.new(0,9)
    local c = Instance.new("UICorner")
    c.CornerRadius = radius
    c.Parent = parent
    return c
end

local function newUIStroke(parent, color, thickness)
    local s = Instance.new("UIStroke")
    s.Color = color or Color3.fromRGB(0,0,0)
    s.Thickness = thickness or 2
    s.Parent = parent
    return s
end

local function animateRGB(label)
    spawn(function()
        local t = 0
        while label and label.Parent do
            label.TextColor3 = Color3.fromHSV((t % 1), 0.8, 1)
            t = t + 0.01
            RunService.Heartbeat:Wait()
        end
    end)
end

local function styleButton(btn, colorBase, colorHover, textBase, textHover)
    btn.BackgroundColor3 = colorBase
    btn.TextColor3 = textBase
    btn.AutoButtonColor = false
    btn.MouseEnter:Connect(function()
        btn.BackgroundColor3 = colorHover
        btn.TextColor3 = textHover
    end)
    btn.MouseLeave:Connect(function()
        btn.BackgroundColor3 = colorBase
        btn.TextColor3 = textBase
    end)
    btn.MouseButton1Down:Connect(function()
        btn.Position = btn.Position + UDim2.new(0,0,0,2)
    end)
    btn.MouseButton1Up:Connect(function()
        btn.Position = btn.Position - UDim2.new(0,0,0,2)
    end)
end

local function makeDraggable(frame)
    local dragging, dragInput, dragStart, startPos
    frame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position
            dragInput = input
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    frame.InputChanged:Connect(function(input)
        if dragging and (input == dragInput) then
            local delta = input.Position - dragStart
            frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if dragging and (input == dragInput) then
            local delta = input.Position - dragStart
            frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
end

local mainWidth, mainHeight = 320, 170
local main = Instance.new("Frame")
main.Name = "MainWindow"
main.Size = UDim2.fromOffset(mainWidth, mainHeight)
main.Position = UDim2.new(0.5, -mainWidth/2, 0.45, -mainHeight/2)
main.BackgroundTransparency = 1
main.BorderSizePixel = 0
main.Active = true
main.Parent = sg

local mainBg = Instance.new("Frame", main)
mainBg.Size = UDim2.fromScale(1, 1)
mainBg.BackgroundColor3 = Color3.fromRGB(67, 9, 17)
mainBg.BorderSizePixel = 0
newUICorner(mainBg, UDim.new(0, 12))
newUIStroke(mainBg, Color3.fromRGB(30,10,12), 2)

local grad = Instance.new("UIGradient", mainBg)
grad.Rotation = 90
grad.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(180, 34, 59)),
    ColorSequenceKeypoint.new(0.7, Color3.fromRGB(97, 11, 33)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(67, 9, 17))
})

local imageUrl = "rbxassetid://72447234301333"
local fireDecalId = "rbxassetid://14661356874"
local fire = Instance.new("ImageLabel", mainBg)
fire.Image = fireDecalId
fire.BackgroundTransparency = 1
fire.Size = UDim2.new(1, 0, 0.12, 0)
fire.Position = UDim2.new(0, 0, 0.88, 0)

local title = Instance.new("TextLabel", mainBg)
title.Text = "Yoriichi Menu"
title.Size = UDim2.new(1, 0, 0, 23)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundTransparency = 1
title.Font = Enum.Font.GothamBold
title.TextSize = 18
title.TextXAlignment = Enum.TextXAlignment.Center
animateRGB(title)

local tabBar = Instance.new("Frame", mainBg)
tabBar.Name = "TabBar"
tabBar.Size = UDim2.new(1, -10, 0, 14)
tabBar.Position = UDim2.new(0, 5, 0, 20)
tabBar.BackgroundTransparency = 1
tabBar.BorderSizePixel = 0

local tabNames = {"Universal", "Rng Civilizacion"}
local tabButtons = {}
local selectedTab = 1

local universalPage = Instance.new("Frame", mainBg)
universalPage.Name = "UniversalPage"
universalPage.Size = UDim2.new(1, -10, 1, -39)
universalPage.Position = UDim2.new(0, 5, 0, 34)
universalPage.BackgroundColor3 = Color3.fromRGB(97, 11, 33)
newUICorner(universalPage, UDim.new(0, 8))
universalPage.Visible = true
universalPage.Active = true

local rngPage = Instance.new("Frame", mainBg)
rngPage.Name = "RNGPage"
rngPage.Size = UDim2.new(1, -10, 1, -39)
rngPage.Position = UDim2.new(0, 5, 0, 34)
rngPage.BackgroundColor3 = Color3.fromRGB(97, 11, 33)
newUICorner(rngPage, UDim.new(0, 8))
rngPage.Visible = false
rngPage.Active = true

local function selectTab(idx)
    selectedTab = idx
    for i, btn in ipairs(tabButtons) do
        if i == idx then
            btn.BackgroundColor3 = Color3.fromRGB(180,34,59)
            btn.TextColor3 = Color3.fromRGB(255,255,255)
        else
            btn.BackgroundColor3 = Color3.fromRGB(97,11,33)
            btn.TextColor3 = Color3.fromRGB(220,220,220)
        end
    end
    universalPage.Visible = (idx == 1)
    rngPage.Visible = (idx == 2)
end

for i, name in ipairs(tabNames) do
    local btn = Instance.new("TextButton", tabBar)
    btn.Name = name.."TabBtn"
    btn.Text = name
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 10
    btn.Size = UDim2.new(0.48, 0, 0, 11)
    btn.Position = UDim2.new((i-1)*0.5 + 0.01, 0, 0, 1)
    btn.BorderSizePixel = 0
    btn.ZIndex = 11
    btn.Active = true
    newUICorner(btn, UDim.new(1,0))
    styleButton(btn, Color3.fromRGB(97,11,33), Color3.fromRGB(180,34,59), Color3.fromRGB(220,220,220), Color3.fromRGB(255,255,255))
    btn.MouseButton1Click:Connect(function() selectTab(i) end)
    tabButtons[i] = btn
end

makeDraggable(main)
makeDraggable(mainBg)

local minBtn = Instance.new("TextButton", mainBg)
minBtn.Text = "-"
minBtn.Font = Enum.Font.GothamBold
minBtn.TextSize = 12
minBtn.Size = UDim2.new(0,18,0,14)
minBtn.Position = UDim2.new(1, -40, 0, 3)
minBtn.BorderSizePixel = 0
minBtn.ZIndex = 13
minBtn.Active = true
newUICorner(minBtn, UDim.new(1, 0))
newUIStroke(minBtn, Color3.fromRGB(67, 9, 17), 1)
styleButton(minBtn, Color3.fromRGB(180,34,59), Color3.fromRGB(255,80,80), Color3.fromRGB(255,255,255), Color3.fromRGB(255,255,255))

local closeBtn = Instance.new("TextButton", mainBg)
closeBtn.Text = "X"
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 12
closeBtn.Size = UDim2.new(0,18,0,14)
closeBtn.Position = UDim2.new(1, -20, 0, 3)
closeBtn.BorderSizePixel = 0
closeBtn.ZIndex = 13
closeBtn.Active = true
newUICorner(closeBtn, UDim.new(1, 0))
newUIStroke(closeBtn, Color3.fromRGB(97,11,33), 1)
styleButton(closeBtn, Color3.fromRGB(180,34,59), Color3.fromRGB(255,80,80), Color3.fromRGB(255,255,255), Color3.fromRGB(255,255,255))

local function tweenQuick(obj, props, time)
    time = time or 0.18
    local ok, t = pcall(function()
        return TweenService:Create(obj, TweenInfo.new(time, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), props)
    end)
    if ok and t then t:Play() end
end

-- MINIWINDOW ARRASTÁVEL PARA MOUSE E TOUCH
local miniPos = UDim2.new(0, 16, 0.7, 0)
local miniFrame = nil
local function createMiniWindow()
    if sg:FindFirstChild("MiniWindow") then return sg:FindFirstChild("MiniWindow") end
    miniFrame = Instance.new("Frame", sg)
    miniFrame.Name = "MiniWindow"
    miniFrame.Size = UDim2.new(0,26,0,26)
    miniFrame.Position = miniPos
    miniFrame.BackgroundColor3 = Color3.fromRGB(180, 34, 59)
    miniFrame.BorderSizePixel = 0
    newUICorner(miniFrame, UDim.new(0, 7))
    newUIStroke(miniFrame, Color3.fromRGB(67, 9, 17), 2)
    miniFrame.ZIndex = 999

    local miniImage = Instance.new("ImageButton", miniFrame)
    miniImage.Size = UDim2.new(1,0,1,0)
    miniImage.Position = UDim2.new(0,0,0,0)
    miniImage.BackgroundTransparency = 1
    miniImage.Image = imageUrl
    miniImage.ZIndex = 1000
    miniImage.AutoButtonColor = true
    newUICorner(miniImage, UDim.new(1,0))

    -- ARRASTO EM QUALQUER PONTO (MOUSE OU TOUCH)
    local dragging, dragStart, startPos, moved
    local function dragInputHandler(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - dragStart
            miniFrame.Position = UDim2.new(
                startPos.X.Scale, startPos.X.Offset + delta.X,
                startPos.Y.Scale, startPos.Y.Offset + delta.Y
            )
            miniPos = miniFrame.Position
            moved = true
        end
    end
    miniFrame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = miniFrame.Position
            moved = false
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    miniFrame.InputChanged:Connect(dragInputHandler)
    UserInputService.InputChanged:Connect(dragInputHandler)

    -- Clique: só abre UI se não arrastou
    local function tryOpen()
        if moved then return end
        if sg:FindFirstChild("MiniWindow") then sg:FindFirstChild("MiniWindow"):Destroy() end
        main.Visible = true
        tweenQuick(main, {Position = UDim2.new(0.5, -mainWidth/2, 0.45, -mainHeight/2)}, 0.18)
        playClickSound()
    end
    miniImage.MouseButton1Up:Connect(tryOpen)
    miniImage.TouchTap:Connect(tryOpen)

    return miniFrame
end

closeBtn.MouseButton1Click:Connect(function()
    pcall(function()
        tweenQuick(main, {Size = UDim2.new(0,0,0,0)}, 0.12)
        wait(0.12)
        if sg and sg.Parent then sg:Destroy() end
    end)
end)

minBtn.MouseButton1Click:Connect(function()
    if sg:FindFirstChild("MiniWindow") then
        sg:FindFirstChild("MiniWindow"):Destroy()
        main.Visible = true
        tweenQuick(main, {Position = UDim2.new(0.5, -mainWidth/2, 0.45, -mainHeight/2)}, 0.18)
        playClickSound()
        return
    end
    tweenQuick(main, {Position = UDim2.new(0.02, 0, 0.7, 0)}, 0.12)
    wait(0.12)
    main.Visible = false
    local mini = createMiniWindow()
    mini.Position = miniPos
end)

UserInputService.InputBegan:Connect(function(input, gpe)
    if gpe then return end
    if input.KeyCode == Enum.KeyCode.M then
        main.Visible = not main.Visible
        if main.Visible and sg:FindFirstChild("MiniWindow") then
            sg:FindFirstChild("MiniWindow"):Destroy()
            playClickSound()
        end
    end
end)

-- Universal funções (Correr/Pular/Fly STZ)
local runBtn = Instance.new("TextButton", universalPage)
runBtn.Name = "RunFastBtn"
runBtn.Text = "Correr Rápido"
runBtn.Font = Enum.Font.GothamBold
runBtn.TextSize = 11
runBtn.Size = UDim2.new(0.8, 0, 0, 18)
runBtn.Position = UDim2.new(0.1, 0, 0, 7)
styleButton(runBtn, Color3.fromRGB(180,34,59), Color3.fromRGB(255, 80, 80), Color3.fromRGB(255,255,255), Color3.fromRGB(255,255,255))
runBtn.BorderSizePixel = 0
newUICorner(runBtn, UDim.new(0, 5))
newUIStroke(runBtn, Color3.fromRGB(67, 9, 17), 2)

local jumpBtn = Instance.new("TextButton", universalPage)
jumpBtn.Name = "JumpHighBtn"
jumpBtn.Text = "Pular Alto"
jumpBtn.Font = Enum.Font.GothamBold
jumpBtn.TextSize = 11
jumpBtn.Size = UDim2.new(0.8, 0, 0, 18)
jumpBtn.Position = UDim2.new(0.1, 0, 0, 27)
styleButton(jumpBtn, Color3.fromRGB(180,34,59), Color3.fromRGB(255, 80, 80), Color3.fromRGB(255,255,255), Color3.fromRGB(255,255,255))
jumpBtn.BorderSizePixel = 0
newUICorner(jumpBtn, UDim.new(0, 5))
newUIStroke(jumpBtn, Color3.fromRGB(67, 9, 17), 2)

local flyBtn = Instance.new("TextButton", universalPage)
flyBtn.Name = "FlyStzBtn"
flyBtn.Text = "Fly STZ"
flyBtn.Font = Enum.Font.GothamBold
flyBtn.TextSize = 11
flyBtn.Size = UDim2.new(0.8, 0, 0, 18)
flyBtn.Position = UDim2.new(0.1, 0, 0, 47)
styleButton(flyBtn, Color3.fromRGB(180,34,59), Color3.fromRGB(255, 80, 80), Color3.fromRGB(255,255,255), Color3.fromRGB(255,255,255))
flyBtn.BorderSizePixel = 0
newUICorner(flyBtn, UDim.new(0, 5))
newUIStroke(flyBtn, Color3.fromRGB(67, 9, 17), 2)

local fastActive = false
local jumpActive = false
local origWalkSpeed = 16
local origJumpPower = 50

local function setSpeed(enable)
    local char = LocalPlayer.Character
    local humanoid = char and char:FindFirstChildOfClass("Humanoid")
    if humanoid then
        if enable then
            origWalkSpeed = humanoid.WalkSpeed or origWalkSpeed
            humanoid.WalkSpeed = 65
        else
            humanoid.WalkSpeed = origWalkSpeed or 16
        end
    end
end

local function setJump(enable)
    local char = LocalPlayer.Character
    local humanoid = char and char:FindFirstChildOfClass("Humanoid")
    if humanoid then
        if enable then
            origJumpPower = humanoid.JumpPower or origJumpPower
            humanoid.JumpPower = 170
        else
            humanoid.JumpPower = origJumpPower or 50
        end
    end
end

runBtn.MouseButton1Click:Connect(function()
    fastActive = not fastActive
    setSpeed(fastActive)
    runBtn.Text = fastActive and "Correr Rápido (ON)" or "Correr Rápido"
    Notify(fastActive and "Velocidade aumentada!" or "Velocidade normal!")
end)

jumpBtn.MouseButton1Click:Connect(function()
    jumpActive = not jumpActive
    setJump(jumpActive)
    jumpBtn.Text = jumpActive and "Pular Alto (ON)" or "Pular Alto"
    Notify(jumpActive and "Pulo MUITO aumentado!" or "Pulo normalizado!")
end)

flyBtn.MouseButton1Click:Connect(function()
    Notify("Executando Fly STZ!")
    pcall(function()
        loadstring(game:HttpGet("https://rawscripts.net/raw/Universal-Script-fly-gui-v3-22133"))()
    end)
end)

LocalPlayer.CharacterAdded:Connect(function(char)
    char:WaitForChild("Humanoid")
    setSpeed(fastActive)
    setJump(jumpActive)
end)

-- RNG CIVILIZACION (TP + Farm Aether)
local tpBtn = Instance.new("TextButton", rngPage)
tpBtn.Name = "TpAetherButton"
tpBtn.Text = "Tp Aether"
tpBtn.Font = Enum.Font.GothamBold
tpBtn.TextSize = 11
tpBtn.Size = UDim2.new(0.8, 0, 0, 18)
tpBtn.Position = UDim2.new(0.1, 0, 0, 7)
styleButton(tpBtn, Color3.fromRGB(180,34,59), Color3.fromRGB(255, 80, 80), Color3.fromRGB(255,255,255), Color3.fromRGB(255,255,255))
tpBtn.BorderSizePixel = 0
newUICorner(tpBtn, UDim.new(0, 5))
newUIStroke(tpBtn, Color3.fromRGB(67, 9, 17), 2)

local aetherCFrame = CFrame.new(
    2029.67358, -120.431458, 1696.65967,
    0.985694766, -6.11008559e-08, 0.168540359,
    5.55547466e-08, 1, 3.76220406e-08,
    -0.168540359, -2.69409566e-08, 0.985694766
)

tpBtn.MouseButton1Click:Connect(function()
    local char = LocalPlayer.Character
    local root = char and char:FindFirstChild("HumanoidRootPart")
    if root then
        root.CFrame = aetherCFrame + Vector3.new(0, 3, 0)
        Notify("Teleportado para o Aether!")
        local humanoid = char:FindFirstChildOfClass("Humanoid")
        if humanoid then pcall(function() humanoid:ChangeState(Enum.HumanoidStateType.GettingUp) end) end
    else
        Notify("Não foi possível teleportar.")
    end
end)

-- BOTÃO FARM AETHER (usa seu script novo)
local farmAetherBtn = Instance.new("TextButton", rngPage)
farmAetherBtn.Name = "FarmAetherBtn"
farmAetherBtn.Text = "Farm Aether"
farmAetherBtn.Font = Enum.Font.GothamBold
farmAetherBtn.TextSize = 11
farmAetherBtn.Size = UDim2.new(0.7, 0, 0, 15)
farmAetherBtn.Position = UDim2.new(0.15, 0, 1, -25)
farmAetherBtn.BackgroundColor3 = Color3.fromRGB(180,34,59)
farmAetherBtn.TextColor3 = Color3.fromRGB(255,255,255)
farmAetherBtn.BorderSizePixel = 0
farmAetherBtn.ZIndex = 15
farmAetherBtn.AutoButtonColor = true
newUICorner(farmAetherBtn, UDim.new(0, 5))
newUIStroke(farmAetherBtn, Color3.fromRGB(97,11,33), 2)
styleButton(farmAetherBtn, Color3.fromRGB(180,34,59), Color3.fromRGB(255,80,80), Color3.fromRGB(255,255,255), Color3.fromRGB(255,255,255))

farmAetherBtn.MouseButton1Click:Connect(function()
    Notify("Farm Aether iniciado!")
    -- === SEU SCRIPT NOVO, 100% ===
    local player = game.Players.LocalPlayer
    local char = player.Character or player.CharacterAdded:Wait()
    local hrp = char:WaitForChild("HumanoidRootPart")

    local gambling = workspace:FindFirstChild("LETS GO GAMBLING")

    if gambling then
        for _, portable in ipairs(gambling:GetChildren()) do
            if portable.Name == "Portable" then
                for _, obj in ipairs(portable:GetChildren()) do
                    if obj:IsA("BasePart") and obj.Name == "Button" then
                        firetouchinterest(hrp, obj, 0)
                        wait(0.1)
                        firetouchinterest(hrp, obj, 1)
                    end
                end
            end
        end
    else
        warn("LETS GO GAMBLING não encontrado")
    end
end)

main.Visible = false
wait(0.10)
main.Visible = true
tweenQuick(main, {Position = UDim2.new(0.5, -mainWidth/2, 0.45, -mainHeight/2)}, 0.42)
selectTab(1)
playClickSound()

Notify("Script carregado corretamente — pronto para uso!")
